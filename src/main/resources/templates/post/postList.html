<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="/css/header.css">
    <link rel="stylesheet" href="/css/post.css">
    <!--font-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100..900&display=swap" rel="stylesheet">
    <!--js-->
    <script defer src="/js/header.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <title>Bread2U</title>
</head>
<body>
<div th:replace="fragments/bodyHeader :: bodyHeader"/>
<!--Article nav 시작-->
<div class="post-nav-container">
    <div class="post-nav">
        <div class="title">
            <div><a href="/post">빵TALK</a></div>
            <img src="../images/icon-rightarrow.png" class="righrarrow-img">
        </div>
        <div>
            <a href="/post/create" class="btn main-color" th:if="${loginMember != null}">글쓰기</a>
        </div>
    </div>
</div>
<!--Article nav 종료-->



<!--Article 시작-->
<div class="article-container">
    <div class="a-row2">
        <div class="id">#</div>
        <div class="title">제목</div>
        <div class="nickname">닉네임</div>
        <div class="date">작성일</div>
        <div class="views">조회</div>
        <div class="likes">추천</div>
    </div>

        <div class ="post-box"
             th:with="
                pageNumber = ${posts.pageable.pageNumber},
                pageSize = ${posts.pageable.pageSize},
                totalPages = ${posts.totalPages},
                startPage = ${T(java.lang.Math).floor(pageNumber / pageSize) * pageSize + 1},
                tempEndPage = ${startPage + pageSize - 1},
                endPage = (${tempEndPage < totalPages ? tempEndPage : totalPages})">

            <div class="a-row3" th:each="post : ${posts}">
                <div class="id" th:text="${post.id}">게시물 번호</div>
                <div class="title">
                    <a href="" th:text="${post.title}" th:href="@{/post/{postId} (postId=${post.id})}" class="link-title">게시물 제목</a>
                    <div class="count-row"><span>[</span><span class="comment-count" th:text="${post.comment.size()}">댓글 수</span><span>]</span></div>
                </div>
                <div class="nickname" th:text="${post.member.nickname}">작성자</div>
                <div class="date" th:text="${#temporals.format(post.createdAt, 'yyyy-MM-dd HH:mm')}">날짜</div>
                <div class="view"><div class="views" th:text="${post.view}">조회수</div></div>
                <div class="like">
                    <img src="../images/icon-likes.png" class="likes-img">
                    <div class="likes" th:text="${post.likes}">좋아요 수</div>
                </div>
            </div>
            <div class="page-box">
                <!-- 페이지 번호-->
                <span th:each="page: ${#numbers.sequence(startPage, endPage)}" class="page-num">
                    <!-- 현재페이지는 링크 없이 숫자만 -->
                    <span th:if="${page == pageNumber + 1}" th:text="${page}" class="current"></span>
                        <!-- 현재페이지 링크 X, 다른 페이지번호에는 링크를 보여준다 -->
                    <span th:unless="${page == pageNumber + 1}">
                        <a th:href="@{/post(page=${page - 1})}" th:text="${page}" class=""></a>
                    </span>
                </span>
            </div>
        </div>




</div>
<!--Article 종료-->
</body>
</html>